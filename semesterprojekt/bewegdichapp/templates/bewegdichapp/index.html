<html>
  <head>
     <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
    </head>
    <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
    <script type="text/javascript">

    </script>
  <body>
     <h4>Latest Locations logged</h4>
    {% if latest_location_list %}
        <ul>
        {% for location in latest_location_list %}
            <li>Coordinates <a href="{% url 'bewegdichapp:detail' location.id %}">{{ location }}</a></li>
        {% endfor %}
        </ul>
    {% else %}
        <p>No locations are available.</p>
    {% endif %}

    <div id="map" style="width:90%; height:80%">></div>
    <script>
      var map;
      var lat = 0.0;
      var long = 0.0;
        if ("geolocation" in navigator) {
          navigator.geolocation.getCurrentPosition(function(position) {
            lat = position.coords.latitude;
            long = position.coords.longitude;

            //alert(lat+","+long);
            map = L.map('map').setView([lat, long], 17);

            L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
                maxZoom: 18,
                attribution: 'Map data Â© <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
                    '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ',
                id: 'examples.map-i875mjb7'
            }).addTo(map);

            L.marker([lat, long]).addTo(map).bindPopup("<b>You are here</b>").openPopup();

            //L.marker([48.35807, 10.90652]).addTo(map)
            //    .bindPopup("<b>University of Applied Sciences Augsburg</b><br />Faculty of Computer Sciences").openPopup();

            L.circle([48.36590, 10.90515], 200, {
                color: 'red',
                fillColor: '#f03',
                fillOpacity: 0.5
            }).addTo(map).bindPopup("I am a circle round the City Galerie.");
          });
        } else {
          alert('failed to get GPS');
        }


</script>
  </body>
</html>